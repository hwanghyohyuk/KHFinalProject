<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="store">
	<resultMap id="resultStore" type="store">
		<result property="store_no" column="store_no" />
		<result property="store_name" column="store_name" />
		<result property="loc_l_code" column="loc_l_code" />
		<result property="loc_l_name" column="loc_l_name" />
		<result property="loc_m_code" column="loc_m_code" />
		<result property="loc_m_name" column="loc_m_name" />
		<result property="loc_s_code" column="loc_s_code" />
		<result property="loc_s_name" column="loc_s_name" />
		<result property="road_address" column="road_address" />
		<result property="num_address" column="num_address" />
		<result property="lat" column="lat" />
		<result property="lng" column="lng" />
		<result property="brand_no" column="brand_no" />
		<result property="join_count" column="join_count" />
		<result property="brand_name" column="brand_name" />
		<result property="salequantity" column="salequantity"/>
	</resultMap>
	
	<!-- 지점 리스트 조회 -->
	<select id="storeList" parameterType="_int" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 검색 : 지점번호 -->
	<select id="storeSearch1" parameterType="store" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			and store_no like #{store_no}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 검색 : 지점명 -->
	<select id="storeSearch2" parameterType="store" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			and store_name like #{store_name}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 검색 : 시도명 -->
	<select id="storeSearch3" parameterType="store" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			and loc_l_name like #{loc_l_name}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 검색 : 구군명 -->
	<select id="storeSearch4" parameterType="store" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			and loc_m_name like #{loc_m_name}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 검색 : 법정동명 -->
	<select id="storeSearch5" parameterType="store" resultType="list" resultMap="resultStore">
		<![CDATA[
			select * from store_view
			where brand_no = #{brand_no}
			and loc_s_name like #{loc_s_name}
			order by store_no asc
		]]>
	</select>
	
	<!-- 지점 삭제 -->
	<delete id="deleteStore" parameterType="store" flushCache="true" statementType="PREPARED">
		<![CDATA[
			delete from tb_store
			where store_no = #{store_no}
			and brand_no = #{brand_no}
		]]>
	</delete>
	
</mapper>

