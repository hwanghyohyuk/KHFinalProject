<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="storeProduct"> 

	<resultMap id="resultStoreProduct" type="storeproduct">
		<result property="store_product_no" column="STORE_PRODUCT_NO" />
		<result property="store_no" column="STORE_NO" />
		<result property="product_no" column="PRODUCT_NO" />
		<result property="product_name" column="PRODUCT_NAME" />
		<result property="manufacturer" column="MANUFACTURER" />
		<result property="price" column="PRICE" />
		<result property="manufacture_date" column="MANUFACTURE_DATE" />
		<result property="expiration_date" column="EXPIRATION_DATE" />
		<result property="expiration_hour" column="EXPIRATION_HOUR" />
		<result property="quantity" column="QUANTITY" />
		<result property="product_kind_no" column="PRODUCT_KIND_NO" />
		<result property="product_kind_name" column="PRODUCT_KIND_NAME" />
		<result property="brand_no" column="BRAND_NO" />
		<result property="brand_name" column="BRAND_NAME" />
		<result property="original_file_name" column="ORIGINAL_FILE_NAME" />
		<result property="stored_file_name" column="STORED_FILE_NAME" />
		<result property="del_check" column="DEL_CHECK" />
		<result property="purchase_count" column="PURCHASE_COUNT" />
		<result property="discount_no" column="DISCOUNT_NO" />
		<result property="discount_info" column="DISCOUNT_INFO" />
	</resultMap>
	
	<select id="getListCount" resultType="int">
		select count(*) from store_popularity_product_view
	</select>
	
	<select id="selectList" parameterType="java.util.Map" resultType="list" resultMap="resultStoreProduct">
		   <![CDATA[
      		select * from (
            select rownum rnum, store_product_no, product_name, price
            from store_popularity_product_view)
            where rnum >= #{startRow} and rnum <= #{endRow}
           ]]>
   </select>

   <select id="searchSproduct" parameterType="hashmap" resultType="list" resultMap="resultStoreProduct">
		   <![CDATA[
		    select * from (
		    select rownum rnum, store_product_no, product_name, price
		    from store_popularity_product_view)
		    where rnum >= #{start} and rnum <= #{end}
		    and product_name like #{keyword}
           ]]>
   </select>
   
   <select id="detailSproduct" parameterType="int" resultType="StoreProduct" resultMap="resultStoreProduct">
		select * from store_popularity_product_view where store_product_no = #{spnum}
   </select>
	
</mapper>	