<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="serviceCenter">

<resultMap id="resultServiceCenter" type="servicecenter">
		<id property="service_no" column="SERVICE_NO"  />
		<result property="title" column="TITLE"/>
		<result property="writer" column="WRITER" />
		<result property="contents" column="CONTENTS" />
		<result property="write_date" column="WRITE_DATE" />
		<result property="readcount" column="READCOUNT" />
		<result property="original_file_name" column="ORIGINAL_FILE_NAME" />
		<result property="stored_file_name" column="STORED_FILE_NAME" />
		<result property="del_check" column="DEL_CHECK" />
	</resultMap>
	
	<select id="serviceList" resultType="list" resultMap="resultServiceCenter">
	<![CDATA[
	SELECT SERVICE_NO, TITLE, WRITER,WRITE_DATE,READCOUNT
FROM TB_SERVICE_CENTER
JOIN TB_USER ON (WRITER = USER_NO)]]>
	</select>
	
	<select id="serviceSearch" resultType="list" resultMap="resultServiceCenter">
	<![CDATA[
	SELECT rownum service_no,title,writer,write_date,readcount FROM TB_SERVICE_CENTER
	WHERE TITLE LIKE #{keyword}]]>
	</select>
	<insert id="serviceInsert" parameterType="servicecenter">
	<![CDATA[
	INSERT INTO TB_SERVICE_CENTER VALUES((SELECT MAX(SERVICE_NO)+1 FROM TB_SERVICE_CENTER), #{TITLE}, #{WRITER}, #{CONTENTS}, 
                                                                          #{WRITE_DATE}, #{READCOUNT}, default, default,default]]>
	</insert>
	</mapper>